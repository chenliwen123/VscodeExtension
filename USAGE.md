# 使用指南

## Git分支自动合并功能

### 🚀 快速开始

1. **确保环境准备**
   - 确保当前工作区是一个Git仓库
   - 确保有dev和sit分支
   - 确保有推送到远程仓库的权限

2. **使用自动合并功能**
   - 切换到要合并的功能分支
   - 按 `Ctrl+Shift+P` 打开命令面板
   - 搜索 "🚀 自动合并当前分支到dev和sit"
   - 自动开始合并（无需确认）
   - 可随时点击取消按钮中止操作

### 📋 功能说明

#### 自动合并流程
```
当前分支 → dev分支 → sit分支
```

具体步骤：
1. 拉取当前分支最新代码
2. 切换到dev分支，拉取最新代码，合并当前分支，推送
3. 切换到sit分支，拉取最新代码，合并dev分支，推送
4. 切换回原始分支

#### 安全检查
- ✅ Git仓库检测
- ✅ 工作区状态检查
- ✅ 当前分支检查（不能在dev/sit分支执行）
- ✅ 合并冲突检测
- ✅ 支持随时取消操作

### ⚠️ 注意事项

1. **工作区状态**
   - 建议在合并前提交或暂存所有更改
   - 如果有未提交的更改，系统会提示处理

2. **分支要求**
   - 确保dev和sit分支存在
   - 确保有相应分支的推送权限

3. **冲突处理**
   - 如果发生合并冲突，操作会停止
   - 需要手动解决冲突后重新执行

### 🔧 故障排除

#### 常见错误及解决方案

**错误：`not a git repository`**
- 原因：当前目录不是Git仓库
- 解决：确保在Git项目根目录下使用

**错误：`工作区有未提交的更改`**
- 原因：有未提交的文件修改
- 解决：提交更改或使用 `git stash` 暂存

**错误：`合并时发生冲突`**
- 原因：分支间有冲突的更改
- 解决：手动解决冲突后重新合并

**错误：`Failed to connect to github.com`**
- 原因：网络连接问题
- 解决：检查网络连接或配置代理

### ⏹️ 取消操作

合并过程中支持随时取消：
- **取消方式**：点击进度通知右侧的 "✕" 按钮
- **取消时机**：可在任何合并步骤中取消
- **安全性**：取消后会停止后续操作，已完成的步骤不会回滚
- **状态提示**：取消后会显示警告消息

### 📊 日志查看

合并过程中的详细日志会显示在 "Git Branch Manager" 输出面板中：
- 查看方式：`查看` → `输出` → 选择 "Git Branch Manager"
- 包含每个步骤的执行状态和错误信息
- 记录取消操作的时间和状态

### 🎯 最佳实践

1. **合并前检查**
   ```bash
   git status          # 检查工作区状态
   git log --oneline   # 查看提交历史
   ```

2. **定期同步**
   - 定期从远程拉取最新代码
   - 保持本地分支与远程同步

3. **分支命名规范**
   - 使用有意义的分支名称
   - 遵循团队的命名约定

### 🔄 手动操作对比

#### 传统手动操作
```bash
# 切换到源分支
git checkout feature-branch
git pull origin feature-branch

# 合并到dev
git checkout dev
git pull origin dev
git merge feature-branch
git push origin dev

# 合并到sit
git checkout sit
git pull origin sit
git merge dev
git push origin sit

# 切换回原分支
git checkout feature-branch
```

#### 使用扩展
1. 切换到要合并的功能分支
2. 打开命令面板
3. 选择 "🚀 自动合并当前分支到dev和sit"
4. 自动开始合并（可随时取消）

### 📞 支持

如果遇到问题：
1. 查看输出面板的详细日志
2. 检查Git仓库状态
3. 确认网络连接
4. 提交Issue到GitHub仓库
